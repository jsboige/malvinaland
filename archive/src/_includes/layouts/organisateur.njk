---
layout: layouts/base.njk
bodyClass: organisateur-page protected-page
customStyles: "/assets/css/organisateur.css"
---

<div class="organisateur-header">
  <h1>{{ title }}</h1>
  <div class="organisateur-actions">
    <button id="pocket-button" class="pocket-button" aria-label="Masquer le contenu">
      <span class="icon">ğŸ‘ï¸</span>
    </button>
    <button id="contrast-button" class="contrast-button" aria-label="Mode contraste Ã©levÃ©" onclick="toggleHighContrast()">
      <span class="icon">ğŸŒ™</span>
    </button>
  </div>
</div>

<div class="organisateur-content">
  {{ content | safe }}
</div>

<script>
  // VÃ©rifier si l'utilisateur est authentifiÃ©
  document.addEventListener('DOMContentLoaded', function() {
    const isAuthenticated = sessionStorage.getItem('authenticated') === 'true';
    const userRole = sessionStorage.getItem('userRole');
    
    if (!isAuthenticated || userRole !== 'organisateur') {
      // Rediriger vers la page de connexion
      window.location.href = '/login/';
    }
  });
  
  // Fonction pour masquer rapidement le contenu
  document.getElementById('pocket-button').addEventListener('click', function() {
    document.body.classList.toggle('stealth-mode');
    
    // Changer l'icÃ´ne du bouton selon le mode
    const icon = this.querySelector('.icon');
    if (document.body.classList.contains('stealth-mode')) {
      icon.textContent = 'ğŸ‘ï¸â€ğŸ—¨ï¸';
      this.setAttribute('aria-label', 'Afficher le contenu');
    } else {
      icon.textContent = 'ğŸ‘ï¸';
      this.setAttribute('aria-label', 'Masquer le contenu');
    }
  });
  
  // Fonction pour basculer le mode contraste Ã©levÃ©
  function toggleHighContrast() {
    document.body.classList.toggle('high-contrast');
    
    // Stocker la prÃ©fÃ©rence de l'utilisateur
    const isHighContrast = document.body.classList.contains('high-contrast');
    localStorage.setItem('highContrast', isHighContrast);
    
    // Mettre Ã  jour le bouton de contraste
    const contrastButton = document.getElementById('contrast-button');
    const icon = contrastButton.querySelector('.icon');
    
    if (isHighContrast) {
      icon.textContent = 'â˜€ï¸';
      contrastButton.setAttribute('aria-label', 'Mode normal');
    } else {
      icon.textContent = 'ğŸŒ™';
      contrastButton.setAttribute('aria-label', 'Mode contraste Ã©levÃ©');
    }
  }
  
  // Appliquer les prÃ©fÃ©rences utilisateur au chargement
  document.addEventListener('DOMContentLoaded', function() {
    const isHighContrast = localStorage.getItem('highContrast') === 'true';
    if (isHighContrast) {
      document.body.classList.add('high-contrast');
      
      const contrastButton = document.getElementById('contrast-button');
      const icon = contrastButton.querySelector('.icon');
      icon.textContent = 'â˜€ï¸';
      contrastButton.setAttribute('aria-label', 'Mode normal');
    }
  });
</script>